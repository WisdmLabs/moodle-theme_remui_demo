{"version":3,"file":"remuiloader.min.js","sources":["../src/remuiloader.js"],"sourcesContent":["/* eslint-disable no-console */\n/* eslint-disable jsdoc/require-jsdoc*/\n/* eslint-disable jsdoc/require-jsdoc*/\n/* eslint-disable jsdoc/require-jsdoc*/\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @module     theme_remui/remuiloader\n * @copyright (c) 2020 WisdmLabs (https://wisdmlabs.com/)\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery'], function ($) {\n\n    const registerCommonEvents = () => {\n\n        // Make AddBlock modal full Width.\n        $(document).on('click', '[data-key=\"addblock\"]', function () {\n            setTimeout(function () {\n                $('.modal[data-region=\"modal-container\"]').addClass(\"fullwidth-modal\");\n            }, 500);\n        });\n\n\n        // This events handle the collapse issue on the messaging panel.\n        msgBodyViewFavourite.on('click', function (e) {\n            stopCollapseInMsgPanel(msgBodyViewFavourite, e);\n        });\n\n        msgBodyViewGroupmsg.on('click', function (e) {\n            stopCollapseInMsgPanel(msgBodyViewGroupmsg, e);\n        });\n\n        msgBodyViewPrivate.on('click', function (e) {\n            stopCollapseInMsgPanel(msgBodyViewPrivate, e);\n        });\n\n        // This events handle the collapse issue on the messaging page .\n        msgPanelBodyViewFavourite.on('click', function (e) {\n            stopCollapseInMsgPanel(msgPanelBodyViewFavourite, e);\n        });\n\n        msgPanelBodyViewGroupmsg.on('click', function (e) {\n            stopCollapseInMsgPanel(msgPanelBodyViewGroupmsg, e);\n        });\n\n        msgPanelBodyViewPrivate.on('click', function (e) {\n            stopCollapseInMsgPanel(msgPanelBodyViewPrivate, e);\n        });\n\n        $(\".nav-grouping-selector ul li \").on(\"click\", function () {\n            $(this).siblings(\"li\").find(\"a\").removeAttr(\"aria-current\", false);\n            $(this).find(\"a\").attr(\"aria-current\", true);\n        });\n\n        $(\".nav-display-selector ul li \").on(\"click\", function () {\n            $(this).siblings(\"li\").find(\"a\").removeAttr(\"aria-current\", false);\n            $(this).siblings(\"li\").find(\"span\").removeAttr(\"aria-current\", false);\n            $(this).find(\"a\").attr(\"aria-current\", true);\n            $(this).find(\"span\").attr(\"aria-current\", true);\n        });\n\n        // Every time the window is scrolled.\n        $(window).scroll(function () {\n            transparentheaderhanlder();\n        });\n\n        $('.category-wrapper .toggle-btn').on(\"click\", function(){\n            console.log(\"listner is working fine\");\n            setTimeout(() => {\n                $(this).closest('.dropdown-menu').addClass('show');\n            }, 1);\n        });\n\n        $(document).on('click', function (e) {\n            // Check if the clicked element is NOT inside the dropdown\n            if (!$('.dropdown').is(e.target) && $('.dropdown').has(e.target).length === 0) {\n              // Close the dropdown\n              $('.category-wrapper .toggle-btn').closest('.dropdown-menu').removeClass('show');\n            }\n          });\n\n        registerGoToTopEvents();\n\n        registerShowPasswordAction();\n    };\n\n    // Variables for msg body container\n    var msgBodyViewFavourite = $('[data-region=\"body-container\"]').find('[data-region=\"view-overview-favourites\"]');\n    var msgBodyViewGroupmsg = $('[data-region=\"body-container\"]').find('[data-region=\"view-overview-group-messages\"]');\n    var msgBodyViewPrivate = $('[data-region=\"body-container\"]').find('[data-region=\"view-overview-messages\"]');\n\n    // Variables for msg panel body container(messaging page)\n    var msgPanelBodyViewFavourite = $('[data-region=\"panel-body-container\"]').find('[data-region=\"view-overview-favourites\"]');\n    var msgPanelBodyViewGroupmsg = $('[data-region=\"panel-body-container\"]').find('[data-region=\"view-overview-group-messages\"]');\n    var msgPanelBodyViewPrivate = $('[data-region=\"panel-body-container\"]').find('[data-region=\"view-overview-messages\"]');\n\n    const transparentheaderhanlder = () => {\n        var transparentheader = false;\n        if ($('.navbar').hasClass('trasnparent-home-nav')) {\n            transparentheader = true;\n        }\n        $(\"body.pagelayout-frontpage\").removeClass(\"transparent-header\");\n        if (transparentheader) {\n            var windowtop = $(window).scrollTop();\n            if (windowtop < 45) {\n                var hasedwcarouselclass = $('#block-region-full-width-top').children().first().find('div').hasClass('edw-carousel');\n                var hascarouselclass = $('#block-region-full-width-top').children().first().find('div').hasClass('carousel');\n                var hastestimonial = false;\n                var hashomepagetestimonial = $('#block-region-full-width-top').children().first().find('section').hasClass('section-testimonial');\n                if (hasedwcarouselclass) {\n                    var firstChild = $('#block-region-full-width-top').children().first();\n                    var divWithCarouselClass = firstChild.find('div.edw-carousel');\n                    var idAttribute = divWithCarouselClass.attr('id');\n                    if (idAttribute && idAttribute.indexOf('testimonial') !== -1) {\n                        hastestimonial = true;\n                    }\n\n                }\n                if ((hascarouselclass || hasedwcarouselclass) && !hashomepagetestimonial && !hastestimonial) {\n                    $(\"body.pagelayout-frontpage\").addClass(\"transparent-header\");\n                }\n                if ($('.old-frontpage .frontpage-sections #edwiser-slider').children().first().hasClass('carousel')) {\n                    $(\"body.pagelayout-frontpage\").addClass(\"transparent-header\");\n                }\n                return;\n            }\n            $(\"body.pagelayout-frontpage\").removeClass(\"transparent-header\");\n        }\n    }\n\n    /*\n     * Common method to stop collapsing messaging tabs\n     */\n    const stopCollapseInMsgPanel = ($this, e) => {\n        if ($this.hasClass('expanded')) {\n            e.preventDefault();\n            e.stopPropagation();\n        }\n    };\n    /*\n     * Creating mini version of bootstrap-select for Dropdowns\n     * {String} dropdownselector class selector for dropdown\n     */\n    const generateDropdownSearch = (dropdownselector) => {\n\n        var _catmenus = $(dropdownselector + '+ .dropdown-menu');\n        var _searchfield = \".catsearch\";\n\n        var sr_text = M.util.get_string('searchcatplaceholdertext', 'theme_remui');\n        var _inputfield = '<div class=\"simplesearchform edw-search-field catsearchfield p-3 d-none\">';\n        _inputfield += '<div class=\"input-group d-flex align-items-center\">';\n        _inputfield += '<label for=\"header-category-searchinput\">';\n        _inputfield += '<span class=\"sr-only\">Search</span>';\n        _inputfield += '</label>';\n        _inputfield += '<div class=\"input-group-prepend\">';\n        _inputfield += '<button type=\"submit\" class=\"btn btn-submit\" data-action=\"submit\">';\n        _inputfield += '<span class=\"edw-icon edw-icon-Search\"></span>';\n        _inputfield += '<span class=\"sr-only\">' + sr_text + '</span>';\n        _inputfield += '</button>';\n        _inputfield += '</div>';\n        _inputfield += '<input tabindex=\"1\" type=\"text\" id=\"header-category-searchinput\" class=\"catsearch form-control withclear navigation-text\" placeholder=\"' + sr_text + '\" aria-label=\"' + sr_text + '\" name=\"catsearch\">';\n        _inputfield += '</div>';\n\n        _catmenus.prepend(_inputfield);\n        $(\".catsearch-item\").unbind();\n        $(\".catsearch-item .catsearch\").unbind();\n        /*\n         * Search Function in the dropdown items according to input field text.\n         */\n        function filterFunction() {\n            var input, filter, a, i;\n            input = $('.catselector-menu + .dropdown-menu').find(\".catsearch\");\n\n            filter = input.val().toUpperCase();\n\n            a = _catmenus.find(\"a\");\n            for (i = 0; i < a.length; i++) {\n                var _txtval = a[i].textContent || a[i].innerText;\n                _txtval = _txtval.split(\" \").join(\"\");\n                if (_txtval.toUpperCase().indexOf(filter) > -1) {\n                    a[i].style.display = \"\";\n                } else {\n                    a[i].style.display = \"none\";\n                }\n            }\n        }\n        _catmenus.find(_searchfield).on(\"keyup\", function (e) {\n            if (e.which == 32) {\n                return true;\n            }\n            filterFunction();\n        });\n\n    };\n\n    const registerGoToTopEvents = () => {\n        const _GOTOPSELECTOR = \"#gotop\";\n        // Scroll to top.\n        $(_GOTOPSELECTOR).click(function () {\n            $('html, body').animate({ scrollTop: 0 }, $(window).scrollTop() / 6);\n            return false;\n        });\n\n        // Hide and Show Go to top button.\n        $(window).scroll(function () {\n            if ($(this).scrollTop() > 300) {\n                $(_GOTOPSELECTOR).removeClass(\"d-none\").addClass(\"d-flex\");\n            } else {\n                $(_GOTOPSELECTOR).removeClass(\"d-flex\").addClass(\"d-none\");\n            }\n        });\n    };\n\n    const registerShowPasswordAction = () => {\n        const _passwordfieldwrapper = '.password-field-eye';\n        const _passwordShowIcon = _passwordfieldwrapper + ' .show-password-icon';\n        const _passwordInputField = _passwordfieldwrapper + ' input[name=\"password\"]';\n\n        $(_passwordShowIcon).hover(\n            function () {\n                $(_passwordInputField).attr(\"type\", \"text\");\n            },\n            function () {\n                $(_passwordInputField).attr(\"type\", \"password\");\n            }\n        );\n    };\n\n    return {\n        init: function () {\n            registerCommonEvents();\n\n            // Enable Category Search filter in header.\n            if ($(\".catselector-menu\").length) {\n                generateDropdownSearch(\".catselector-menu\");\n            }\n            // Search Page Content handling\n            if (!$('#page-search-index .search-results').length) {\n                // var data = \"<div class = 'search-result-count p-mb-4 d-none small-info-semibold'>0 \"+ M.util.get_string('searchtotalcount', 'theme_remui')+\"</div>\";\n                var htmldata = '<div class=\"search-results\">' + M.util.get_string('noresutssearchmsg', 'theme_remui') + '' + '</div>';\n                $(\"#page-search-index #region-main  [role = main]\").append(htmldata);\n            } else {\n                var searchdata = $(\"#page-search-index  #id_searchcontainer [name=q]\").val();\n                searchdata = \"<div class=' p-mt-2 h-regular-6'>\" + M.util.get_string('searchresultdesctext', 'theme_remui') + ' `' + searchdata + '`' + \"</div>\";\n                console.log(searchdata);\n                $('#page-search-index  .page-header-headings').append(searchdata);\n            }\n            $(\"#page-search-index .search-result-count\").detach().prependTo(\"#page-search-index #region-main\")\n            $(\"#page-search-index .search-result-count\").removeClass('d-none');\n\n            transparentheaderhanlder();\n        },\n    };\n});\n"],"names":["define","$","registerCommonEvents","document","on","setTimeout","addClass","msgBodyViewFavourite","e","stopCollapseInMsgPanel","msgBodyViewGroupmsg","msgBodyViewPrivate","msgPanelBodyViewFavourite","msgPanelBodyViewGroupmsg","msgPanelBodyViewPrivate","this","siblings","find","removeAttr","attr","window","scroll","transparentheaderhanlder","console","log","closest","is","target","has","length","removeClass","registerGoToTopEvents","registerShowPasswordAction","transparentheader","hasClass","scrollTop","hasedwcarouselclass","children","first","hascarouselclass","hastestimonial","hashomepagetestimonial","idAttribute","indexOf","$this","preventDefault","stopPropagation","generateDropdownSearch","dropdownselector","_catmenus","sr_text","M","util","get_string","_inputfield","prepend","unbind","which","filter","a","i","val","toUpperCase","_txtval","textContent","innerText","split","join","style","display","filterFunction","click","animate","_passwordfieldwrapper","hover","init","searchdata","append","htmldata","detach","prependTo"],"mappings":"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"}