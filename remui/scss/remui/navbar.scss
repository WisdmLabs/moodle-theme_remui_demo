$navbar-nav-gap: 24px;
$navbar-nav-gap-mobile: 16px;
$dropdown-icon-size: 24px;
$navbar-logo-bg-color: $white !default;
$navbar-logo-max-width:240px;
$navbar-shadow: true !default;
$navbar-shadow-size: 0.813rem !default;
$navbar-shadow-blur: 2.313rem !default;
$navbar-shadow-color: rgba(92, 107, 121, 0.1) !default;
$demonavbar-menu-max-height: 80vh;

@import './components/nav_search';

body.transparent-header:not(body.latest-frontpage.transparent-header){
    .navbar{
        box-shadow: unset;
        &.trasnparent-home-nav{
            background-color: transparent !important;
            .sub-nav{
                background-color: transparent !important;
            }
            .navbar-brand{
                background-color: transparent !important;
            }
        }
    }
    #page{
        margin-top: 0px !important;
        background-color: transparent;
    }
    &.editing{
        #block-region-full-width-top{
            section.block:first-child{
                .block-body-wrapper{
                    position: relative;
                    .block-header-wrapper{
                        position: absolute;
                        z-index: 5;
                        top: $navbar-height;
                        right: 0px;
                    }
                }
            }
        }
    }
}

.navbar {
    background-color: $bg-header;
    @if $navbar-shadow != false {
        box-shadow: 0 $navbar-shadow-size $navbar-shadow-blur $navbar-shadow-color;
    }
    [data-key="myhome"] {
        display: $hide-dashboard;
    }
    [data-key="home"] {
        display: $hide-home;
    }
    [data-key="mycourses"] {
        display: $hide-my-courses;
    }
    [data-key="siteadminnode"] {
        display: $hide-site-admin;
    }
    [data-key="coursecat"] {
        display: $show-coursecat;
    }
    [data-key="recentcourses"] {
        display: $show-recentcourses;
        .dropdown-menu{
            min-width: 388px;
            .dropdown-item{
                white-space: normal;
            }
        }
    }
    #usernavigation {
        .userinitials {
            width: $navbar-avatar-size;
            height: $navbar-avatar-size;
            font-size: 16px;
            font-weight: 600;
            color: $navbar-userinitials-color;
            @media only screen and (max-width: $custom-breakpoint-xs) {
                width: $navbar-avatar-size-sm;
                height: $navbar-avatar-size-sm;
            }
        }
        // Rounded user pictures
        .userpicture {
            width: $navbar-avatar-size;
            height: $navbar-avatar-size;
            @media only screen and (max-width: $custom-breakpoint-xs) {
                width: $navbar-avatar-size-sm;
                height: $navbar-avatar-size-sm;
            }
        }
        .divider {
            width: 1px;
            background-color: $header-menu-divider-bg-color;
            border: 0;
            opacity: 0.7;

        }

        // Old code
        // .popover-region:not(.collapsed) .popover-region-toggle .edw-icon {
        //     color: $hds-icon-active-color;
        // }

        .nav-link:focus{
            .edw-icon{
                color: $hds-icon-active-color;
            }
        }
        .popover-region .nav-link:hover{
            color: $hds-icon-hover-color;;
        }
    }
    .sub-nav {
        .primary-navigation,
        #usernavigation .edwiser-navigation,
        #user-action-menu,
        .popover-region-container,
        .simplesearchform input,
        .simplesearchform input::placeholder {
            font-family: $hds-menu-font-family;
            font-size: #{$hds-menu-fontsize}px;
            text-transform: $hds-menu-text-transform;
            letter-spacing: $hds-menu-letter-spacing;
            font-weight: $hds-menu-fontweight;
        }
    }
    .primary-navigation {
        .nav-link.active {
            color: $header-menu-text-active-color;
            &::before {
                border-bottom-color: $header-menu-text-active-color;
            }
        }
        // .nav-item.dropdown {
        // background-color: $header-menu-element-bg-color;
        // .dropdown-toggle {
        //     background: transparent;
        // }
        // }
    }
    .primary-navigation,
    #usernavigation {
        .nav-link,
        .more-nav > .dropdown > .dropdown-toggle {
            // background-color: $header-menu-element-bg-color;
            color: $header-menu-text-color;
            &:hover {
                color: $header-menu-text-hover-color;
            }
            &:active {
                color: $header-menu-text-active-color;
            }
        }
    }
    .custom-switch {
        .custom-control-label::before {
            background-color: $header-menu-element-bg-color;
            border-color: $header-menu-divider-bg-color;
        }
        .custom-control-label::after {
            border-color: $header-menu-divider-bg-color;
        }
    }
    .edw-icon {
        font-size: $navbar-icon-size;
        height: $navbar-icon-size;
        width: $navbar-icon-size;
        // color: $navbar-icon-color;
        color: $hds-icon-color;
        font-weight: 400;
        &:hover {
            color: $hds-icon-hover-color;
        }
    }
    /*This is to handle Profile dropdown icons.*/
    #user-action-menu {
        #usermenu-carousel {
            .carousel-item {
                transition: transform .1s ease-in-out;
            }
            #carousel-item-main {
                .dropdown-item {
                    display: flex;
                    padding: $dropdown-iconitem-padding-y $dropdown-item-padding-x;
                    align-items: center;
                    gap: 8px;
                }
            }
            .dropdown-divider {
                margin-top: 0;
            }
        }
    }

    .popover-region-toggle {
        .count-container {
            right: -5px;
        }
    }
    .usermenu-wrapper{
        .usermenu-container{
            .usermenu{
                #user-menu-toggle{
                    color: $header-menu-text-color;
                    &:hover{
                        color: $header-menu-text-hover-color;
                    }
                    &[aria-expanded="true"]:active {
                        color: $header-menu-text-active-color;
                    }
                }
            }
        }
    }
    .dropdown-menu{
        margin-top: 24px;
    }
}

.navbar-nav {
    gap: $navbar-nav-gap;
    .usermenu-wrapper {
        gap: $navbar-nav-gap;
        padding: 0 1px;
    }
    @include media-breakpoint-down(sm) {
        gap: $navbar-nav-gap-mobile;
        .usermenu-wrapper {
            gap: map-get($gapspace, "4");
        }
    }
    @media only screen and (max-width: $custom-breakpoint-xs) and (min-width:340px) {
        gap: map-get($gapspace, "4");
        #user-menu-toggle::after{
            content: '';
        }
    }
    @media only screen and (max-width: 340px) {
        gap:map-get($gapspace, "1");
        #user-menu-toggle::after{
            content: '';
        }
    }
}


.navbar-brand{
    padding: 0 16px;
    height: $navbar-height;
    &.logo,.navbar-brand-logo {
        max-height: 100%;
        height: calc(#{$navbar-height} - #{$navbar-vertical-padding} - #{$navbar-vertical-padding});
        display: flex;
        align-items: center;
    }
}
.dropdown {
    .dropdown-item[aria-current="true"],
    .dropdown-item.active {
        background-color: $bg-small-ui;
        color: $dropdown-link-color;
    }
    &.show {
        > .dropdown-toggle {
            color: $brand-primary;
            background-color: $header-text-hover-backgroundcolor;
        }
    }
}
.dropdownmoremenu {
    &:not(.d-none) {
        display: flex;
        align-items: center;
    }
    .dropdown-toggle.nav-link {
        height: $dropdown-icon-size;
        width: $dropdown-icon-size;
        justify-content: center;
        background: $header-menu-element-bg-color;
        border-radius: 2px;
        margin: 0 8px;
        // &:hover {
        //     background: $bg-header-ele;
        // }
        span {
            // margin-top: -10px;
            font-size: $edw-icon-size-large;
        }

        &::after {
            display: none;
        }
    }
}
#user-menu-toggle {
    padding: 0;
}

.primary-navigation .navigation .catselector-menu {
    &.nav-link {
        background-color: $header-menu-element-bg-color;
        border-radius: 4px;
        padding-left: 12px;
        padding-right: 12px;
        // &:hover {
        //     background: $bg-header-ele;
        // }
    }
    + .dropdown-menu {
        max-height: 450px;
        min-width: 450px;
        max-width: 980px;
        width: max-content;

        @include media-breakpoint-down(lg) {
            max-width: 700px;
        }

        .dropdown-item {
            white-space: pre-wrap;
        }
        .catsearchfield {
            position: sticky;
            top: 0;
            background-color: $white;
        }
    }
}

.navbar.right {
    flex-direction: row-reverse;
    .p-ml-md-8 {
        margin-right: 32px;
        margin-left: 0;
    }
    .p-mr-4 {
        margin-right: 0;
        margin-left: 16px;
    }
}
.sub-nav {
    padding: $navbar-padding-y $navbar-padding-x;
}
.sub-nav {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    padding: 16px 24px;
    background-color: $navbar-background-color;
}
.navbar-brand-logo {
    font-size: $navbar-logo-text-size;
    @include media-breakpoint-down(md) {
        font-size: $navbar-logo-text-size-tablet;
    }
}
.navbar-brand {
    background-color: $navbar-logo-bg-color;
}

// Demo Navbar
.demo-navbar {
    z-index: 1031;
    height: $subnav-height;
    background-color: #001C1D;
    border-bottom: 1px solid #3C4848;
    gap: map-get($gapspace, 10 );

    @include media-breakpoint-down(md) {
        gap: map-get($gapspace, 4);
    }

    .btn-back {
        display: none;
        background-color: unset;
        border: unset;

        color: #00B0B0;
        @include get_typography(5, semibold, desktop);

        img {
            width: 24px;
            height: fit-content;
        }

        @include media-breakpoint-down(md) {
            display: flex;
        }
    }

    .dropdown-mobile-title {
        display: none;
        color: #fff;
        @include get_typography(3, bold, desktop);

        @include media-breakpoint-down(md) {
            display: block;
        }

    }

    .navbar {
        position: static;
        top: 0 !important;
        background-color: #001C1D;
    }

    .navbar-toggler {
        img.close-icon {
            display: none;
        }
    }

    .navbar-toggler[aria-expanded="true"] {
        img.close-icon {
            display: block;
        }

        img.hamburger-icon {
            display: none;
        }
    }

    .demo-logo {
        background-color: transparent;
    }

    .underline::before {
        display: none;
        content: "";
        position: absolute;
        left: 1px;
        height: 4px;
        width: 100%;
        border-radius: 8px;
        background: #F75D25;        
    }

    .navbar-nav,
    .navbar-right {
        
        background-color: #001C1D;

        .nav-item {
            color: #ABBEBE;
            @include get_typography(6, semibold, desktop);
            font-weight: 500;
            list-style: none;

            .nav-link {
                display: flex;
                align-items: center;
                box-shadow: unset;
            }

            .dropdown-toggle {
                color: inherit;

                &:after {
                    font-size: 11px;
                    margin-left: 0;
                    width: unset;
                }
            }

            &.show {
                color: $white;

                .dropdown-toggle {
                    &::after {
                        transform: rotate(180deg);
                    }

                    &.underline::before {
                        bottom: -5px;
                        display: block;
                    }
                }
            }
        }
    
        .dropdown-menu {
            position: fixed;
            top: $subnav-height;
            left: 0;
            width: 100%;
            height: fit-content;
            max-height: $demonavbar-menu-max-height;
            overflow: auto;
            margin-top: 0;
            border: 0;
            border-radius: 0;
        }
    }

    .navbar-right {
        gap: map-get($gapspace, 4);;
        height: fit-content;

        .nav-item {
            border-radius: 4px;
            border: 1px solid #008B91;
        }

        .dropdown-menu {
            margin-top: 10px;
        }
    }
    
    .navbar-nav {
        gap: 0 map-get($gapspace, 10);;
        margin-left: 0;

        @include media-breakpoint-down(md) {
            position: fixed;
            top: $subnav-height;
            left: 0px;
            right: 0;
            width: 100%;

            padding: map-get($spacerspx, 8)  map-get($spacerspx, 12)  map-get($spacerspx, 12);

            .nav-item {
                @include get_typography(4, regular, desktop);

                .nav-link {
                    padding: 0;
                }

                .dropdown-toggle::after {
                    margin-left: auto;
                    transform: rotate(270deg);
                    font-size: 12px;
                }
            }

            .nav-item:not(:first-child) {
                padding-top: map-get($spacerspx, 8);
                border-top: 1px solid #3C4848;
            }

            .nav-item:not(:last-child) {
                padding-bottom: map-get($spacerspx, 8);
            }
        }
        
    }

    &-menu-container {
        background-color: #001C1D;
        padding: map-get($spacerspx, 10) 70px;

        @include media-breakpoint-down(lg) {
            padding-left: map-get($spacerspx, 8);
            padding-right: map-get($spacerspx, 8);
        }

        @include media-breakpoint-down(sm) {
            padding: map-get($spacerspx, 8);
        }
    }

    .menu-heading {
        position: relative;
        display: flex;
        align-items: center;
        gap: map-get($gapspace, 1d5);;
        background-color: unset;
        border: unset;
        padding: 0;

        color: #ABBEBE;;
        @include get_typography(5, semibold, desktop);
    
        img {
            height: 24px;
            width: fit-content;
        }
    }

    .underline-thin {
        &::after {
            content: "";
            width: 100%;
            position: absolute;
            bottom: -12px;
            left: 0;
            border-bottom: 1px solid #3C4545;
        }
    }

    // demo templates
    &-templates {
        
        .buttons-wrapper {
          display: flex;
          gap: map-get($gapspace, 8);;
          margin-bottom: 8px;
        }

        .btn-tab.menu-heading {
            font-size: 14px;
            font-weight: 400;
            cursor: pointer;

            img {
                width: 24px;
                filter: brightness(0) saturate(100%) invert(26%) sepia(57%) saturate(3125%) hue-rotate(164deg) brightness(101%) contrast(101%);
            }
        }
      
        .btn-tab.menu-heading:focus {
          outline: 0;
        }
      
        .btn-tab.menu-heading.active,
        .btn-tab.menu-heading:hover {
          color: $white;

          &.underline::before {
            bottom: -9px;
            display: block;
          } 
        }

        .btn-tab.menu-heading.active {
            img {
                filter: unset;
            }
        }

        .tab-template-content {
            .template-section {
                margin-top: 40px;

                @include media-breakpoint-down(md) {
                    margin-top: 32px;
                }
            }

            .template-section-title {
                @include get_typography(4, semibold, desktop);
                color: #E9FFFF;
                font-size: 18px;
            }

            .templates-container {
                margin-top: 24px;
                display: grid;
                grid-template-columns:repeat(auto-fill, minmax(200px, 1fr));
                gap: map-get($gapspace, 9);;

                @include media-breakpoint-down(sm) {
                    grid-template-columns:repeat(auto-fill, minmax(133px, 1fr));
                }
            }

            .template {
                .template-body {
                    height: 280px;
                    width: 100%;
                    overflow: hidden;
                    position: relative;

                    img {
                        position: absolute;
                        top: 0;
                        left: 0;
                        width: 100%;
                    }

                    @include media-breakpoint-down(sm) {
                        height: 180px;
                    }


                }

                .template-title {
                    color: #90ADAD;
                    @include get_typography(5, regular, desktop);
                    margin-top: 16px;
                }
            }
        }
    }

    //Theme pages
    &-theme-pages {
        display: flex;
        gap: 60px;
        flex-wrap: wrap;

        @include media-breakpoint-down(lg) {
            gap: map-get($gapspace, 14);;
        }

        @include media-breakpoint-down(lg) {
            gap: map-get($gapspace, 12);;
        }

        .page-sections {
            width: calc(25% - 45px);
            display: flex;
            flex-direction: column;
            height: fit-content;

            img {
                width: 24px;
                height: 24px;
                object-fit: contain;
            }

            @include media-breakpoint-down(md) {
                width: calc(50% - 30px);
            }

            @include media-breakpoint-down(sm) {
                width: 100%;
            }
        }

        .pages-heading-box {
            text-transform: uppercase;
        }

        .pages-link-wrapper {
            margin-top: 44px;

            .title,
            .page-url {
                color: #EFFFFF;
                @include get_typography(5, semibold, desktop);
                font-weight: 500;
                text-decoration: none;
            }

            .page-url:hover {
                color: #F75D25;
            }

            .title {
                color: #768888;
            }

            &.font-14 .page-url {
                font-size: 14px;
            }
        }
    }

    &-features {
        .feature-heading {
            max-width: 300px;
        }

        .features-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 34px 66px;
        }

        .feature {
            .icon-wrapper {
                width: 56px;
                height: 56px;
                border-radius: 8px;
            }

            .title {
                color: #FFF;
                @include get_typography(5, semibold, desktop);
                font-weight: 500;
            }

            .desc {
                color: #768888;
                @include get_typography(6, regular, desktop);
            }
            
            &:hover {
                .icon-wrapper {
                    background-color: #0C2E30;
                }

                .title {
                    color: #F75D25;
                }
            }
        }
    }

    &-whatsnew {
        .section-new-feature {
            gap: 96px; 
            .new-wrapper {
                width: fit-content;
                // min-width: 250px;
                max-width: 300px;
                height: fit-content;
            }

            @include media-breakpoint-down(lg) {
                gap: map-get($gapspace , 14);
            }

            @include media-breakpoint-down(md) {
                gap: 96px;
            }

            @include media-breakpoint-down(sm) {
                flex-wrap: wrap;
                gap: map-get($gapspace , 12);
            }

        }

        .pages-heading-box {
            text-transform: uppercase;
        }

        .bugs-wrapper {
            .bug {
                color: #FFF;
                @include get_typography(6, regular, desktop);
            }
        }



        .improvement-functionality-box {
            gap: 72px 96px; 
            height: fit-content;

            .feature {
                color: #FFF;
                @include get_typography(5, semibold, desktop);
                font-weight: 500;
            }

            @include media-breakpoint-down(lg) {
                gap: map-get($gapspace , 14);
            }

            @include media-breakpoint-down(sm) {
                gap: map-get($gapspace , 12);
                flex-direction: column;
            }
        }
    }
}
